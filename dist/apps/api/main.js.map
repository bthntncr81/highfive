{
  "version": 3,
  "sources": ["../../../apps/api/src/main.ts", "../../../apps/api/src/routes/auth.ts", "../../../apps/api/src/routes/users.ts", "../../../apps/api/src/middleware/auth.ts", "../../../apps/api/src/websocket/index.ts", "../../../apps/api/src/routes/tables.ts", "../../../apps/api/src/routes/categories.ts", "../../../apps/api/src/routes/menu.ts", "../../../apps/api/src/routes/orders.ts", "../../../apps/api/src/routes/reports.ts", "../../../apps/api/src/routes/settings.ts"],
  "sourcesContent": ["import Fastify from 'fastify';\nimport cors from '@fastify/cors';\nimport websocket from '@fastify/websocket';\nimport { PrismaClient } from '@prisma/client';\n\n// Routes\nimport authRoutes from './routes/auth';\nimport userRoutes from './routes/users';\nimport tableRoutes from './routes/tables';\nimport categoryRoutes from './routes/categories';\nimport menuRoutes from './routes/menu';\nimport orderRoutes from './routes/orders';\nimport reportRoutes from './routes/reports';\nimport settingsRoutes from './routes/settings';\n\n// WebSocket handler\nimport { setupWebSocket } from './websocket';\n\nconst prisma = new PrismaClient();\n\nconst server = Fastify({\n  logger: {\n    level: process.env.NODE_ENV === 'production' ? 'info' : 'debug',\n    transport: process.env.NODE_ENV !== 'production' ? {\n      target: 'pino-pretty',\n      options: {\n        colorize: true,\n      },\n    } : undefined,\n  },\n});\n\n// Plugins\nserver.register(cors, {\n  origin: true,\n  credentials: true,\n});\n\nserver.register(websocket);\n\n// Decorate with prisma\nserver.decorate('prisma', prisma);\n\n// Health check\nserver.get('/health', async () => {\n  return { status: 'ok', timestamp: new Date().toISOString() };\n});\n\n// API Routes\nserver.register(authRoutes, { prefix: '/api/auth' });\nserver.register(userRoutes, { prefix: '/api/users' });\nserver.register(tableRoutes, { prefix: '/api/tables' });\nserver.register(categoryRoutes, { prefix: '/api/categories' });\nserver.register(menuRoutes, { prefix: '/api/menu' });\nserver.register(orderRoutes, { prefix: '/api/orders' });\nserver.register(reportRoutes, { prefix: '/api/reports' });\nserver.register(settingsRoutes, { prefix: '/api/settings' });\n\n// WebSocket\nsetupWebSocket(server);\n\n// Start server\nconst start = async () => {\n  try {\n    const port = parseInt(process.env.PORT || '3000', 10);\n    await server.listen({ port, host: '0.0.0.0' });\n    console.log(`\uD83D\uDE80 HighFive API running on http://localhost:${port}`);\n  } catch (err) {\n    server.log.error(err);\n    process.exit(1);\n  }\n};\n\n// Graceful shutdown\nconst shutdown = async () => {\n  console.log('Shutting down...');\n  await prisma.$disconnect();\n  await server.close();\n  process.exit(0);\n};\n\nprocess.on('SIGTERM', shutdown);\nprocess.on('SIGINT', shutdown);\n\nstart();\n", "import { PrismaClient } from '@prisma/client';\nimport bcrypt from 'bcryptjs';\nimport { FastifyInstance, FastifyReply, FastifyRequest } from 'fastify';\nimport jwt from 'jsonwebtoken';\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';\nconst JWT_EXPIRES_IN = 60 * 60 * 24 * 7; // 7 days in seconds\n\nexport default async function authRoutes(server: FastifyInstance) {\n  const prisma = (server as any).prisma as PrismaClient;\n\n  // Login with email and password\n  server.post(\n    '/login',\n    async (request: FastifyRequest, reply: FastifyReply) => {\n      const { email, password } = request.body as {\n        email: string;\n        password: string;\n      };\n\n      if (!email || !password) {\n        return reply.status(400).send({ error: 'Email ve \u015Fifre gerekli' });\n      }\n\n      const user = await prisma.user.findUnique({\n        where: { email },\n      });\n\n      if (!user || !user.active) {\n        return reply.status(401).send({ error: 'Ge\u00E7ersiz email veya \u015Fifre' });\n      }\n\n      const validPassword = await bcrypt.compare(password, user.password);\n      if (!validPassword) {\n        return reply.status(401).send({ error: 'Ge\u00E7ersiz email veya \u015Fifre' });\n      }\n\n      const token = jwt.sign({ userId: user.id, role: user.role }, JWT_SECRET, {\n        expiresIn: JWT_EXPIRES_IN,\n      });\n\n      // Create session\n      const expiresAt = new Date();\n      expiresAt.setDate(expiresAt.getDate() + 7);\n\n      await prisma.session.create({\n        data: {\n          userId: user.id,\n          token,\n          expiresAt,\n        },\n      });\n\n      // Log activity\n      await prisma.activityLog.create({\n        data: {\n          userId: user.id,\n          action: 'LOGIN',\n          details: { method: 'email' },\n          ipAddress: request.ip,\n        },\n      });\n\n      return {\n        token,\n        user: {\n          id: user.id,\n          email: user.email,\n          name: user.name,\n          role: user.role,\n          avatar: user.avatar,\n        },\n      };\n    },\n  );\n\n  // Login with PIN (quick login for POS)\n  server.post(\n    '/pin-login',\n    async (request: FastifyRequest, reply: FastifyReply) => {\n      const { pin } = request.body as { pin: string };\n\n      if (!pin || pin.length !== 4) {\n        return reply.status(400).send({ error: 'Ge\u00E7erli bir PIN giriniz' });\n      }\n\n      const user = await prisma.user.findFirst({\n        where: { pin, active: true },\n      });\n\n      if (!user) {\n        return reply.status(401).send({ error: 'Ge\u00E7ersiz PIN' });\n      }\n\n      const token = jwt.sign(\n        { userId: user.id, role: user.role },\n        JWT_SECRET,\n        { expiresIn: 60 * 60 * 12 }, // 12 hours in seconds\n      );\n\n      const expiresAt = new Date();\n      expiresAt.setHours(expiresAt.getHours() + 12);\n\n      await prisma.session.create({\n        data: {\n          userId: user.id,\n          token,\n          expiresAt,\n        },\n      });\n\n      await prisma.activityLog.create({\n        data: {\n          userId: user.id,\n          action: 'LOGIN',\n          details: { method: 'pin' },\n          ipAddress: request.ip,\n        },\n      });\n\n      return {\n        token,\n        user: {\n          id: user.id,\n          email: user.email,\n          name: user.name,\n          role: user.role,\n          avatar: user.avatar,\n        },\n      };\n    },\n  );\n\n  // Logout\n  server.post(\n    '/logout',\n    async (request: FastifyRequest, reply: FastifyReply) => {\n      const authHeader = request.headers.authorization;\n      if (!authHeader) {\n        return reply.status(401).send({ error: 'Token gerekli' });\n      }\n\n      const token = authHeader.replace('Bearer ', '');\n\n      await prisma.session.deleteMany({\n        where: { token },\n      });\n\n      return { success: true };\n    },\n  );\n\n  // Get current user\n  server.get('/me', async (request: FastifyRequest, reply: FastifyReply) => {\n    const authHeader = request.headers.authorization;\n    if (!authHeader) {\n      return reply.status(401).send({ error: 'Token gerekli' });\n    }\n\n    const token = authHeader.replace('Bearer ', '');\n\n    try {\n      const decoded = jwt.verify(token, JWT_SECRET) as { userId: string };\n\n      const user = await prisma.user.findUnique({\n        where: { id: decoded.userId },\n        select: {\n          id: true,\n          email: true,\n          name: true,\n          role: true,\n          avatar: true,\n          active: true,\n        },\n      });\n\n      if (!user || !user.active) {\n        return reply.status(401).send({ error: 'Kullan\u0131c\u0131 bulunamad\u0131' });\n      }\n\n      return { user };\n    } catch (err) {\n      return reply.status(401).send({ error: 'Ge\u00E7ersiz token' });\n    }\n  });\n\n  // Change password\n  server.post(\n    '/change-password',\n    async (request: FastifyRequest, reply: FastifyReply) => {\n      const authHeader = request.headers.authorization;\n      if (!authHeader) {\n        return reply.status(401).send({ error: 'Token gerekli' });\n      }\n\n      const token = authHeader.replace('Bearer ', '');\n      const { currentPassword, newPassword } = request.body as {\n        currentPassword: string;\n        newPassword: string;\n      };\n\n      if (!currentPassword || !newPassword) {\n        return reply\n          .status(400)\n          .send({ error: 'Mevcut ve yeni \u015Fifre gerekli' });\n      }\n\n      try {\n        const decoded = jwt.verify(token, JWT_SECRET) as { userId: string };\n\n        const user = await prisma.user.findUnique({\n          where: { id: decoded.userId },\n        });\n\n        if (!user) {\n          return reply.status(401).send({ error: 'Kullan\u0131c\u0131 bulunamad\u0131' });\n        }\n\n        const validPassword = await bcrypt.compare(\n          currentPassword,\n          user.password,\n        );\n        if (!validPassword) {\n          return reply.status(401).send({ error: 'Mevcut \u015Fifre yanl\u0131\u015F' });\n        }\n\n        const hashedPassword = await bcrypt.hash(newPassword, 10);\n\n        await prisma.user.update({\n          where: { id: user.id },\n          data: { password: hashedPassword },\n        });\n\n        await prisma.activityLog.create({\n          data: {\n            userId: user.id,\n            action: 'PASSWORD_CHANGE',\n            ipAddress: request.ip,\n          },\n        });\n\n        return { success: true };\n      } catch (err) {\n        return reply.status(401).send({ error: 'Ge\u00E7ersiz token' });\n      }\n    },\n  );\n}\n", "import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';\nimport { PrismaClient, UserRole } from '@prisma/client';\nimport bcrypt from 'bcryptjs';\nimport { verifyAdmin } from '../middleware/auth';\n\nexport default async function userRoutes(server: FastifyInstance) {\n  const prisma = (server as any).prisma as PrismaClient;\n\n  // Get all users (admin only)\n  server.get('/', { preHandler: verifyAdmin }, async (request: FastifyRequest) => {\n    const users = await prisma.user.findMany({\n      select: {\n        id: true,\n        email: true,\n        name: true,\n        role: true,\n        avatar: true,\n        active: true,\n        createdAt: true,\n      },\n      orderBy: { createdAt: 'desc' },\n    });\n    return { users };\n  });\n\n  // Get single user\n  server.get('/:id', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    \n    const user = await prisma.user.findUnique({\n      where: { id },\n      select: {\n        id: true,\n        email: true,\n        name: true,\n        role: true,\n        avatar: true,\n        active: true,\n        createdAt: true,\n        updatedAt: true,\n      },\n    });\n\n    if (!user) {\n      return reply.status(404).send({ error: 'Kullan\u0131c\u0131 bulunamad\u0131' });\n    }\n\n    return { user };\n  });\n\n  // Create user (admin only)\n  server.post('/', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { email, password, name, role, pin } = request.body as {\n      email: string;\n      password: string;\n      name: string;\n      role: UserRole;\n      pin?: string;\n    };\n\n    if (!email || !password || !name) {\n      return reply.status(400).send({ error: 'Email, \u015Fifre ve isim gerekli' });\n    }\n\n    const existing = await prisma.user.findUnique({ where: { email } });\n    if (existing) {\n      return reply.status(400).send({ error: 'Bu email zaten kullan\u0131l\u0131yor' });\n    }\n\n    if (pin) {\n      const existingPin = await prisma.user.findFirst({ where: { pin } });\n      if (existingPin) {\n        return reply.status(400).send({ error: 'Bu PIN zaten kullan\u0131l\u0131yor' });\n      }\n    }\n\n    const hashedPassword = await bcrypt.hash(password, 10);\n\n    const user = await prisma.user.create({\n      data: {\n        email,\n        password: hashedPassword,\n        name,\n        role: role || UserRole.WAITER,\n        pin,\n      },\n      select: {\n        id: true,\n        email: true,\n        name: true,\n        role: true,\n        active: true,\n        createdAt: true,\n      },\n    });\n\n    return { user };\n  });\n\n  // Update user (admin only)\n  server.put('/:id', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const { email, name, role, pin, active, password } = request.body as {\n      email?: string;\n      name?: string;\n      role?: UserRole;\n      pin?: string;\n      active?: boolean;\n      password?: string;\n    };\n\n    const user = await prisma.user.findUnique({ where: { id } });\n    if (!user) {\n      return reply.status(404).send({ error: 'Kullan\u0131c\u0131 bulunamad\u0131' });\n    }\n\n    // Check email uniqueness\n    if (email && email !== user.email) {\n      const existing = await prisma.user.findUnique({ where: { email } });\n      if (existing) {\n        return reply.status(400).send({ error: 'Bu email zaten kullan\u0131l\u0131yor' });\n      }\n    }\n\n    // Check PIN uniqueness\n    if (pin && pin !== user.pin) {\n      const existingPin = await prisma.user.findFirst({ where: { pin } });\n      if (existingPin) {\n        return reply.status(400).send({ error: 'Bu PIN zaten kullan\u0131l\u0131yor' });\n      }\n    }\n\n    const updateData: any = {};\n    if (email) updateData.email = email;\n    if (name) updateData.name = name;\n    if (role) updateData.role = role;\n    if (pin !== undefined) updateData.pin = pin;\n    if (active !== undefined) updateData.active = active;\n    if (password) updateData.password = await bcrypt.hash(password, 10);\n\n    const updatedUser = await prisma.user.update({\n      where: { id },\n      data: updateData,\n      select: {\n        id: true,\n        email: true,\n        name: true,\n        role: true,\n        active: true,\n        updatedAt: true,\n      },\n    });\n\n    return { user: updatedUser };\n  });\n\n  // Delete user (admin only)\n  server.delete('/:id', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n\n    const user = await prisma.user.findUnique({ where: { id } });\n    if (!user) {\n      return reply.status(404).send({ error: 'Kullan\u0131c\u0131 bulunamad\u0131' });\n    }\n\n    // Soft delete - just deactivate\n    await prisma.user.update({\n      where: { id },\n      data: { active: false },\n    });\n\n    return { success: true };\n  });\n\n  // Get activity logs for a user\n  server.get('/:id/activity', { preHandler: verifyAdmin }, async (request: FastifyRequest) => {\n    const { id } = request.params as { id: string };\n\n    const logs = await prisma.activityLog.findMany({\n      where: { userId: id },\n      orderBy: { createdAt: 'desc' },\n      take: 100,\n    });\n\n    return { logs };\n  });\n}\n\n", "import { FastifyRequest, FastifyReply } from 'fastify';\nimport jwt from 'jsonwebtoken';\nimport { UserRole } from '@prisma/client';\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';\n\ninterface JWTPayload {\n  userId: string;\n  role: UserRole;\n}\n\n// Verify any authenticated user\nexport async function verifyAuth(request: FastifyRequest, reply: FastifyReply) {\n  const authHeader = request.headers.authorization;\n  \n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    return reply.status(401).send({ error: 'Token gerekli' });\n  }\n\n  const token = authHeader.replace('Bearer ', '');\n\n  try {\n    const decoded = jwt.verify(token, JWT_SECRET) as JWTPayload;\n    (request as any).user = decoded;\n  } catch (err) {\n    return reply.status(401).send({ error: 'Ge\u00E7ersiz token' });\n  }\n}\n\n// Verify admin or manager\nexport async function verifyAdmin(request: FastifyRequest, reply: FastifyReply) {\n  const authHeader = request.headers.authorization;\n  \n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    return reply.status(401).send({ error: 'Token gerekli' });\n  }\n\n  const token = authHeader.replace('Bearer ', '');\n\n  try {\n    const decoded = jwt.verify(token, JWT_SECRET) as JWTPayload;\n    \n    if (decoded.role !== UserRole.ADMIN && decoded.role !== UserRole.MANAGER) {\n      return reply.status(403).send({ error: 'Bu i\u015Flem i\u00E7in yetkiniz yok' });\n    }\n    \n    (request as any).user = decoded;\n  } catch (err) {\n    return reply.status(401).send({ error: 'Ge\u00E7ersiz token' });\n  }\n}\n\n// Verify kitchen staff\nexport async function verifyKitchen(request: FastifyRequest, reply: FastifyReply) {\n  const authHeader = request.headers.authorization;\n  \n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    return reply.status(401).send({ error: 'Token gerekli' });\n  }\n\n  const token = authHeader.replace('Bearer ', '');\n\n  try {\n    const decoded = jwt.verify(token, JWT_SECRET) as JWTPayload;\n    \n    const allowedRoles: UserRole[] = [UserRole.ADMIN, UserRole.MANAGER, UserRole.KITCHEN];\n    if (!allowedRoles.includes(decoded.role as UserRole)) {\n      return reply.status(403).send({ error: 'Bu i\u015Flem i\u00E7in yetkiniz yok' });\n    }\n    \n    (request as any).user = decoded;\n  } catch (err) {\n    return reply.status(401).send({ error: 'Ge\u00E7ersiz token' });\n  }\n}\n\n", "import { WebSocket } from '@fastify/websocket';\nimport { FastifyInstance } from 'fastify';\n\n// Connected clients\nconst clients = new Map<string, Set<WebSocket>>();\n\n// Channels\nconst CHANNELS = {\n  ORDERS: 'orders',\n  KITCHEN: 'kitchen',\n  TABLES: 'tables',\n  NOTIFICATIONS: 'notifications',\n};\n\nexport function setupWebSocket(server: FastifyInstance) {\n  server.get('/ws', { websocket: true }, (socket, req) => {\n    const clientId = Math.random().toString(36).substring(7);\n    console.log(`Client connected: ${clientId}`);\n\n    // Default to notifications channel\n    let subscribedChannels = new Set<string>([CHANNELS.NOTIFICATIONS]);\n\n    socket.on('message', (rawMessage: Buffer) => {\n      try {\n        const message = JSON.parse(rawMessage.toString());\n\n        switch (message.type) {\n          case 'subscribe':\n            if (\n              message.channel &&\n              Object.values(CHANNELS).includes(message.channel)\n            ) {\n              subscribedChannels.add(message.channel);\n\n              if (!clients.has(message.channel)) {\n                clients.set(message.channel, new Set());\n              }\n              clients.get(message.channel)!.add(socket);\n\n              socket.send(\n                JSON.stringify({\n                  type: 'subscribed',\n                  channel: message.channel,\n                }),\n              );\n            }\n            break;\n\n          case 'unsubscribe':\n            if (message.channel) {\n              subscribedChannels.delete(message.channel);\n              clients.get(message.channel)?.delete(socket);\n\n              socket.send(\n                JSON.stringify({\n                  type: 'unsubscribed',\n                  channel: message.channel,\n                }),\n              );\n            }\n            break;\n\n          case 'ping':\n            socket.send(JSON.stringify({ type: 'pong' }));\n            break;\n        }\n      } catch (err) {\n        console.error('WebSocket message error:', err);\n      }\n    });\n\n    socket.on('close', () => {\n      console.log(`Client disconnected: ${clientId}`);\n      // Remove from all channels\n      subscribedChannels.forEach((channel) => {\n        clients.get(channel)?.delete(socket);\n      });\n    });\n\n    socket.on('error', (err: Error) => {\n      console.error('WebSocket error:', err);\n    });\n  });\n}\n\n// Broadcast to a specific channel\nexport function broadcast(channel: string, data: any) {\n  const channelClients = clients.get(channel);\n  if (!channelClients) return;\n\n  const message = JSON.stringify({\n    type: 'message',\n    channel,\n    data,\n    timestamp: new Date().toISOString(),\n  });\n\n  channelClients.forEach((client) => {\n    if (client.readyState === 1) {\n      // WebSocket.OPEN\n      client.send(message);\n    }\n  });\n}\n\n// Broadcast order updates\nexport function broadcastOrderUpdate(order: any) {\n  broadcast(CHANNELS.ORDERS, { action: 'update', order });\n  broadcast(CHANNELS.KITCHEN, { action: 'update', order });\n}\n\n// Broadcast new order\nexport function broadcastNewOrder(order: any) {\n  broadcast(CHANNELS.ORDERS, { action: 'new', order });\n  broadcast(CHANNELS.KITCHEN, { action: 'new', order });\n  broadcast(CHANNELS.NOTIFICATIONS, {\n    action: 'new_order',\n    message: `Yeni sipari\u015F: #${order.orderNumber}`,\n    order,\n  });\n}\n\n// Broadcast table update\nexport function broadcastTableUpdate(table: any) {\n  broadcast(CHANNELS.TABLES, { action: 'update', table });\n}\n\nexport { CHANNELS };\n", "import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';\nimport { PrismaClient, TableStatus } from '@prisma/client';\nimport { verifyAuth } from '../middleware/auth';\nimport { broadcastTableUpdate } from '../websocket';\n\nexport default async function tableRoutes(server: FastifyInstance) {\n  const prisma = (server as any).prisma as PrismaClient;\n\n  // Get all tables\n  server.get('/', { preHandler: verifyAuth }, async () => {\n    const tables = await prisma.table.findMany({\n      where: { active: true },\n      include: {\n        orders: {\n          where: {\n            status: { notIn: ['COMPLETED', 'CANCELLED'] },\n          },\n          include: {\n            items: {\n              include: {\n                menuItem: true,\n              },\n            },\n          },\n        },\n      },\n      orderBy: { number: 'asc' },\n    });\n    return { tables };\n  });\n\n  // Get single table with current order\n  server.get('/:id', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n\n    const table = await prisma.table.findUnique({\n      where: { id },\n      include: {\n        orders: {\n          where: {\n            status: { notIn: ['COMPLETED', 'CANCELLED'] },\n          },\n          include: {\n            items: {\n              include: {\n                menuItem: true,\n              },\n            },\n            user: {\n              select: { id: true, name: true },\n            },\n          },\n        },\n      },\n    });\n\n    if (!table) {\n      return reply.status(404).send({ error: 'Masa bulunamad\u0131' });\n    }\n\n    return { table };\n  });\n\n  // Create table\n  server.post('/', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { number, name, capacity, positionX, positionY, floor } = request.body as {\n      number: number;\n      name?: string;\n      capacity?: number;\n      positionX?: number;\n      positionY?: number;\n      floor?: number;\n    };\n\n    if (!number) {\n      return reply.status(400).send({ error: 'Masa numaras\u0131 gerekli' });\n    }\n\n    const existing = await prisma.table.findUnique({ where: { number } });\n    if (existing) {\n      return reply.status(400).send({ error: 'Bu masa numaras\u0131 zaten kullan\u0131l\u0131yor' });\n    }\n\n    const table = await prisma.table.create({\n      data: {\n        number,\n        name: name || `Masa ${number}`,\n        capacity: capacity || 4,\n        positionX,\n        positionY,\n        floor: floor || 1,\n      },\n    });\n\n    broadcastTableUpdate(table);\n    return { table };\n  });\n\n  // Update table\n  server.put('/:id', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const { number, name, capacity, status, positionX, positionY, floor, active } = request.body as {\n      number?: number;\n      name?: string;\n      capacity?: number;\n      status?: TableStatus;\n      positionX?: number;\n      positionY?: number;\n      floor?: number;\n      active?: boolean;\n    };\n\n    const table = await prisma.table.findUnique({ where: { id } });\n    if (!table) {\n      return reply.status(404).send({ error: 'Masa bulunamad\u0131' });\n    }\n\n    // Check number uniqueness\n    if (number && number !== table.number) {\n      const existing = await prisma.table.findUnique({ where: { number } });\n      if (existing) {\n        return reply.status(400).send({ error: 'Bu masa numaras\u0131 zaten kullan\u0131l\u0131yor' });\n      }\n    }\n\n    const updatedTable = await prisma.table.update({\n      where: { id },\n      data: {\n        number,\n        name,\n        capacity,\n        status,\n        positionX,\n        positionY,\n        floor,\n        active,\n      },\n    });\n\n    broadcastTableUpdate(updatedTable);\n    return { table: updatedTable };\n  });\n\n  // Update table status\n  server.patch('/:id/status', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const { status } = request.body as { status: TableStatus };\n\n    if (!status) {\n      return reply.status(400).send({ error: 'Durum gerekli' });\n    }\n\n    const table = await prisma.table.findUnique({ where: { id } });\n    if (!table) {\n      return reply.status(404).send({ error: 'Masa bulunamad\u0131' });\n    }\n\n    const updatedTable = await prisma.table.update({\n      where: { id },\n      data: { status },\n    });\n\n    broadcastTableUpdate(updatedTable);\n    return { table: updatedTable };\n  });\n\n  // Delete table (soft delete)\n  server.delete('/:id', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n\n    const table = await prisma.table.findUnique({ where: { id } });\n    if (!table) {\n      return reply.status(404).send({ error: 'Masa bulunamad\u0131' });\n    }\n\n    // Check for active orders\n    const activeOrders = await prisma.order.count({\n      where: {\n        tableId: id,\n        status: { notIn: ['COMPLETED', 'CANCELLED'] },\n      },\n    });\n\n    if (activeOrders > 0) {\n      return reply.status(400).send({ error: 'Bu masada aktif sipari\u015F var' });\n    }\n\n    await prisma.table.update({\n      where: { id },\n      data: { active: false },\n    });\n\n    return { success: true };\n  });\n\n  // Get floor layout\n  server.get('/floor/:floor', { preHandler: verifyAuth }, async (request: FastifyRequest) => {\n    const { floor } = request.params as { floor: string };\n\n    const tables = await prisma.table.findMany({\n      where: {\n        floor: parseInt(floor, 10),\n        active: true,\n      },\n      include: {\n        orders: {\n          where: {\n            status: { notIn: ['COMPLETED', 'CANCELLED'] },\n          },\n          select: {\n            id: true,\n            orderNumber: true,\n            status: true,\n            total: true,\n          },\n        },\n      },\n      orderBy: { number: 'asc' },\n    });\n\n    return { tables };\n  });\n}\n\n", "import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';\nimport { PrismaClient } from '@prisma/client';\nimport { verifyAdmin } from '../middleware/auth';\n\nexport default async function categoryRoutes(server: FastifyInstance) {\n  const prisma = (server as any).prisma as PrismaClient;\n\n  // Get all categories\n  server.get('/', async () => {\n    const categories = await prisma.category.findMany({\n      where: { active: true },\n      include: {\n        _count: {\n          select: { items: true },\n        },\n      },\n      orderBy: { sortOrder: 'asc' },\n    });\n    return { categories };\n  });\n\n  // Get category with items\n  server.get('/:id', async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n\n    const category = await prisma.category.findUnique({\n      where: { id },\n      include: {\n        items: {\n          where: { available: true },\n          orderBy: { sortOrder: 'asc' },\n        },\n      },\n    });\n\n    if (!category) {\n      return reply.status(404).send({ error: 'Kategori bulunamad\u0131' });\n    }\n\n    return { category };\n  });\n\n  // Create category (admin only)\n  server.post('/', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { name, icon, sortOrder } = request.body as {\n      name: string;\n      icon?: string;\n      sortOrder?: number;\n    };\n\n    if (!name) {\n      return reply.status(400).send({ error: 'Kategori ad\u0131 gerekli' });\n    }\n\n    const category = await prisma.category.create({\n      data: {\n        name,\n        icon,\n        sortOrder: sortOrder || 0,\n      },\n    });\n\n    return { category };\n  });\n\n  // Update category (admin only)\n  server.put('/:id', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const { name, icon, sortOrder, active } = request.body as {\n      name?: string;\n      icon?: string;\n      sortOrder?: number;\n      active?: boolean;\n    };\n\n    const category = await prisma.category.findUnique({ where: { id } });\n    if (!category) {\n      return reply.status(404).send({ error: 'Kategori bulunamad\u0131' });\n    }\n\n    const updatedCategory = await prisma.category.update({\n      where: { id },\n      data: {\n        name,\n        icon,\n        sortOrder,\n        active,\n      },\n    });\n\n    return { category: updatedCategory };\n  });\n\n  // Delete category (admin only)\n  server.delete('/:id', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n\n    const category = await prisma.category.findUnique({ where: { id } });\n    if (!category) {\n      return reply.status(404).send({ error: 'Kategori bulunamad\u0131' });\n    }\n\n    // Check if category has items\n    const itemCount = await prisma.menuItem.count({ where: { categoryId: id } });\n    if (itemCount > 0) {\n      // Soft delete\n      await prisma.category.update({\n        where: { id },\n        data: { active: false },\n      });\n    } else {\n      // Hard delete if no items\n      await prisma.category.delete({ where: { id } });\n    }\n\n    return { success: true };\n  });\n\n  // Reorder categories (admin only)\n  server.post('/reorder', { preHandler: verifyAdmin }, async (request: FastifyRequest) => {\n    const { order } = request.body as { order: { id: string; sortOrder: number }[] };\n\n    await Promise.all(\n      order.map(({ id, sortOrder }) =>\n        prisma.category.update({\n          where: { id },\n          data: { sortOrder },\n        })\n      )\n    );\n\n    return { success: true };\n  });\n}\n\n", "import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';\nimport { PrismaClient } from '@prisma/client';\nimport { verifyAuth, verifyAdmin } from '../middleware/auth';\n\nexport default async function menuRoutes(server: FastifyInstance) {\n  const prisma = (server as any).prisma as PrismaClient;\n\n  // Get all menu items (optionally filtered)\n  server.get('/', async (request: FastifyRequest) => {\n    const { category, available, search } = request.query as {\n      category?: string;\n      available?: string;\n      search?: string;\n    };\n\n    const where: any = {};\n    \n    if (category) {\n      where.categoryId = category;\n    }\n    \n    if (available !== undefined) {\n      where.available = available === 'true';\n    }\n    \n    if (search) {\n      where.OR = [\n        { name: { contains: search, mode: 'insensitive' } },\n        { description: { contains: search, mode: 'insensitive' } },\n      ];\n    }\n\n    const items = await prisma.menuItem.findMany({\n      where,\n      include: {\n        category: true,\n        modifiers: true,\n      },\n      orderBy: [\n        { category: { sortOrder: 'asc' } },\n        { sortOrder: 'asc' },\n      ],\n    });\n\n    return { items };\n  });\n\n  // Get single menu item\n  server.get('/:id', async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n\n    const item = await prisma.menuItem.findUnique({\n      where: { id },\n      include: {\n        category: true,\n        modifiers: true,\n      },\n    });\n\n    if (!item) {\n      return reply.status(404).send({ error: '\u00DCr\u00FCn bulunamad\u0131' });\n    }\n\n    return { item };\n  });\n\n  // Create menu item (admin only)\n  server.post('/', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const {\n      categoryId,\n      name,\n      description,\n      price,\n      image,\n      badges,\n      prepTime,\n      modifiers,\n    } = request.body as {\n      categoryId: string;\n      name: string;\n      description?: string;\n      price: number;\n      image?: string;\n      badges?: string[];\n      prepTime?: number;\n      modifiers?: { name: string; price: number }[];\n    };\n\n    if (!categoryId || !name || price === undefined) {\n      return reply.status(400).send({ error: 'Kategori, ad ve fiyat gerekli' });\n    }\n\n    const item = await prisma.menuItem.create({\n      data: {\n        categoryId,\n        name,\n        description,\n        price,\n        image,\n        badges: badges || [],\n        prepTime,\n        modifiers: modifiers\n          ? {\n              create: modifiers.map((m) => ({\n                name: m.name,\n                price: m.price,\n              })),\n            }\n          : undefined,\n      },\n      include: {\n        category: true,\n        modifiers: true,\n      },\n    });\n\n    return { item };\n  });\n\n  // Update menu item (admin only)\n  server.put('/:id', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const {\n      categoryId,\n      name,\n      description,\n      price,\n      image,\n      badges,\n      prepTime,\n      available,\n      sortOrder,\n    } = request.body as {\n      categoryId?: string;\n      name?: string;\n      description?: string;\n      price?: number;\n      image?: string;\n      badges?: string[];\n      prepTime?: number;\n      available?: boolean;\n      sortOrder?: number;\n    };\n\n    const item = await prisma.menuItem.findUnique({ where: { id } });\n    if (!item) {\n      return reply.status(404).send({ error: '\u00DCr\u00FCn bulunamad\u0131' });\n    }\n\n    const updatedItem = await prisma.menuItem.update({\n      where: { id },\n      data: {\n        categoryId,\n        name,\n        description,\n        price,\n        image,\n        badges,\n        prepTime,\n        available,\n        sortOrder,\n      },\n      include: {\n        category: true,\n        modifiers: true,\n      },\n    });\n\n    return { item: updatedItem };\n  });\n\n  // Toggle availability (quick toggle)\n  server.patch('/:id/availability', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const { available } = request.body as { available: boolean };\n\n    const item = await prisma.menuItem.findUnique({ where: { id } });\n    if (!item) {\n      return reply.status(404).send({ error: '\u00DCr\u00FCn bulunamad\u0131' });\n    }\n\n    const updatedItem = await prisma.menuItem.update({\n      where: { id },\n      data: { available },\n    });\n\n    return { item: updatedItem };\n  });\n\n  // Delete menu item (admin only)\n  server.delete('/:id', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n\n    const item = await prisma.menuItem.findUnique({ where: { id } });\n    if (!item) {\n      return reply.status(404).send({ error: '\u00DCr\u00FCn bulunamad\u0131' });\n    }\n\n    // Check if item is used in any order\n    const orderItemCount = await prisma.orderItem.count({\n      where: { menuItemId: id },\n    });\n\n    if (orderItemCount > 0) {\n      // Soft delete - just set unavailable\n      await prisma.menuItem.update({\n        where: { id },\n        data: { available: false },\n      });\n    } else {\n      // Hard delete\n      await prisma.modifier.deleteMany({ where: { menuItemId: id } });\n      await prisma.menuItem.delete({ where: { id } });\n    }\n\n    return { success: true };\n  });\n\n  // Manage modifiers\n  server.post('/:id/modifiers', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const { name, price } = request.body as { name: string; price: number };\n\n    if (!name) {\n      return reply.status(400).send({ error: 'Se\u00E7enek ad\u0131 gerekli' });\n    }\n\n    const modifier = await prisma.modifier.create({\n      data: {\n        menuItemId: id,\n        name,\n        price: price || 0,\n      },\n    });\n\n    return { modifier };\n  });\n\n  server.delete('/:id/modifiers/:modifierId', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { modifierId } = request.params as { id: string; modifierId: string };\n\n    await prisma.modifier.delete({\n      where: { id: modifierId },\n    });\n\n    return { success: true };\n  });\n}\n\n", "import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';\nimport { PrismaClient, OrderStatus, OrderType, PaymentMethod, PaymentStatus, TableStatus } from '@prisma/client';\nimport { verifyAuth, verifyKitchen } from '../middleware/auth';\nimport { broadcastNewOrder, broadcastOrderUpdate, broadcastTableUpdate } from '../websocket';\n\nexport default async function orderRoutes(server: FastifyInstance) {\n  const prisma = (server as any).prisma as PrismaClient;\n\n  // Get all orders (with filters)\n  server.get('/', { preHandler: verifyAuth }, async (request: FastifyRequest) => {\n    const { status, type, date, tableId, limit } = request.query as {\n      status?: OrderStatus;\n      type?: OrderType;\n      date?: string;\n      tableId?: string;\n      limit?: string;\n    };\n\n    const where: any = {};\n    \n    if (status) {\n      where.status = status;\n    }\n    \n    if (type) {\n      where.type = type;\n    }\n    \n    if (tableId) {\n      where.tableId = tableId;\n    }\n    \n    if (date) {\n      const startOfDay = new Date(date);\n      startOfDay.setHours(0, 0, 0, 0);\n      const endOfDay = new Date(date);\n      endOfDay.setHours(23, 59, 59, 999);\n      \n      where.createdAt = {\n        gte: startOfDay,\n        lte: endOfDay,\n      };\n    }\n\n    const orders = await prisma.order.findMany({\n      where,\n      include: {\n        table: true,\n        user: {\n          select: { id: true, name: true },\n        },\n        items: {\n          include: {\n            menuItem: true,\n          },\n        },\n      },\n      orderBy: { createdAt: 'desc' },\n      take: limit ? parseInt(limit, 10) : 100,\n    });\n\n    return { orders };\n  });\n\n  // Get active orders (for kitchen display)\n  server.get('/active', { preHandler: verifyAuth }, async () => {\n    const orders = await prisma.order.findMany({\n      where: {\n        status: {\n          in: [OrderStatus.PENDING, OrderStatus.CONFIRMED, OrderStatus.PREPARING, OrderStatus.READY],\n        },\n      },\n      include: {\n        table: true,\n        user: {\n          select: { id: true, name: true },\n        },\n        items: {\n          include: {\n            menuItem: true,\n          },\n        },\n      },\n      orderBy: { createdAt: 'asc' },\n    });\n\n    return { orders };\n  });\n\n  // Get single order\n  server.get('/:id', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n\n    const order = await prisma.order.findUnique({\n      where: { id },\n      include: {\n        table: true,\n        user: {\n          select: { id: true, name: true },\n        },\n        items: {\n          include: {\n            menuItem: true,\n          },\n        },\n        payments: true,\n        invoice: true,\n      },\n    });\n\n    if (!order) {\n      return reply.status(404).send({ error: 'Sipari\u015F bulunamad\u0131' });\n    }\n\n    return { order };\n  });\n\n  // Create order\n  server.post('/', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const {\n      tableId,\n      customerName,\n      customerPhone,\n      type,\n      items,\n      notes,\n      source,\n    } = request.body as {\n      tableId?: string;\n      customerName?: string;\n      customerPhone?: string;\n      type?: OrderType;\n      items: { menuItemId: string; quantity: number; notes?: string; modifiers?: string[] }[];\n      notes?: string;\n      source?: string;\n    };\n\n    if (!items || items.length === 0) {\n      return reply.status(400).send({ error: 'En az bir \u00FCr\u00FCn gerekli' });\n    }\n\n    const user = (request as any).user;\n\n    // Calculate totals\n    let subtotal = 0;\n    const orderItems = [];\n\n    for (const item of items) {\n      const menuItem = await prisma.menuItem.findUnique({\n        where: { id: item.menuItemId },\n      });\n\n      if (!menuItem || !menuItem.available) {\n        return reply.status(400).send({ error: `\u00DCr\u00FCn mevcut de\u011Fil: ${item.menuItemId}` });\n      }\n\n      const itemTotal = Number(menuItem.price) * item.quantity;\n      subtotal += itemTotal;\n\n      orderItems.push({\n        menuItemId: item.menuItemId,\n        quantity: item.quantity,\n        unitPrice: menuItem.price,\n        total: itemTotal,\n        notes: item.notes,\n        modifiers: item.modifiers || [],\n      });\n    }\n\n    // Get tax rate from settings\n    const settings = await prisma.settings.findUnique({ where: { key: 'restaurant' } });\n    const taxRate = (settings?.value as any)?.taxRate || 10;\n    const tax = subtotal * (taxRate / 100);\n    const total = subtotal + tax;\n\n    // Create order\n    const order = await prisma.order.create({\n      data: {\n        tableId,\n        userId: user.userId,\n        customerName,\n        customerPhone,\n        type: type || (tableId ? OrderType.DINE_IN : OrderType.TAKEAWAY),\n        status: OrderStatus.PENDING,\n        subtotal,\n        tax,\n        total,\n        notes,\n        source: source || 'POS',\n        items: {\n          create: orderItems,\n        },\n      },\n      include: {\n        table: true,\n        user: {\n          select: { id: true, name: true },\n        },\n        items: {\n          include: {\n            menuItem: true,\n          },\n        },\n      },\n    });\n\n    // Update table status if table order\n    if (tableId) {\n      const table = await prisma.table.update({\n        where: { id: tableId },\n        data: { status: TableStatus.OCCUPIED },\n      });\n      broadcastTableUpdate(table);\n    }\n\n    // Broadcast new order\n    broadcastNewOrder(order);\n\n    return { order };\n  });\n\n  // Update order status\n  server.patch('/:id/status', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const { status } = request.body as { status: OrderStatus };\n\n    if (!status) {\n      return reply.status(400).send({ error: 'Durum gerekli' });\n    }\n\n    const order = await prisma.order.findUnique({\n      where: { id },\n      include: { table: true },\n    });\n\n    if (!order) {\n      return reply.status(404).send({ error: 'Sipari\u015F bulunamad\u0131' });\n    }\n\n    const updateData: any = { status };\n    \n    if (status === OrderStatus.COMPLETED) {\n      updateData.completedAt = new Date();\n      \n      // Free up table if table order\n      if (order.tableId) {\n        const table = await prisma.table.update({\n          where: { id: order.tableId },\n          data: { status: TableStatus.CLEANING },\n        });\n        broadcastTableUpdate(table);\n      }\n    }\n\n    const updatedOrder = await prisma.order.update({\n      where: { id },\n      data: updateData,\n      include: {\n        table: true,\n        user: {\n          select: { id: true, name: true },\n        },\n        items: {\n          include: {\n            menuItem: true,\n          },\n        },\n      },\n    });\n\n    // Update individual item statuses\n    if (status === OrderStatus.PREPARING || status === OrderStatus.READY || status === OrderStatus.SERVED) {\n      await prisma.orderItem.updateMany({\n        where: { orderId: id },\n        data: { status },\n      });\n    }\n\n    broadcastOrderUpdate(updatedOrder);\n\n    return { order: updatedOrder };\n  });\n\n  // Update individual item status (for kitchen)\n  server.patch('/:id/items/:itemId/status', { preHandler: verifyKitchen }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id, itemId } = request.params as { id: string; itemId: string };\n    const { status } = request.body as { status: OrderStatus };\n\n    const orderItem = await prisma.orderItem.update({\n      where: { id: itemId },\n      data: { status },\n    });\n\n    // Check if all items have the same status\n    const order = await prisma.order.findUnique({\n      where: { id },\n      include: {\n        items: true,\n        table: true,\n        user: {\n          select: { id: true, name: true },\n        },\n      },\n    });\n\n    if (order) {\n      const allSameStatus = order.items.every((item) => item.status === status);\n      if (allSameStatus && order.status !== status) {\n        await prisma.order.update({\n          where: { id },\n          data: { status },\n        });\n      }\n      \n      broadcastOrderUpdate(order);\n    }\n\n    return { item: orderItem };\n  });\n\n  // Add items to existing order\n  server.post('/:id/items', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const { items } = request.body as {\n      items: { menuItemId: string; quantity: number; notes?: string; modifiers?: string[] }[];\n    };\n\n    const order = await prisma.order.findUnique({ where: { id } });\n    if (!order) {\n      return reply.status(404).send({ error: 'Sipari\u015F bulunamad\u0131' });\n    }\n\n    if (order.status === OrderStatus.COMPLETED || order.status === OrderStatus.CANCELLED) {\n      return reply.status(400).send({ error: 'Bu sipari\u015Fe \u00FCr\u00FCn eklenemez' });\n    }\n\n    let additionalTotal = 0;\n    const newItems = [];\n\n    for (const item of items) {\n      const menuItem = await prisma.menuItem.findUnique({\n        where: { id: item.menuItemId },\n      });\n\n      if (!menuItem || !menuItem.available) {\n        return reply.status(400).send({ error: `\u00DCr\u00FCn mevcut de\u011Fil: ${item.menuItemId}` });\n      }\n\n      const itemTotal = Number(menuItem.price) * item.quantity;\n      additionalTotal += itemTotal;\n\n      newItems.push({\n        orderId: id,\n        menuItemId: item.menuItemId,\n        quantity: item.quantity,\n        unitPrice: menuItem.price,\n        total: itemTotal,\n        notes: item.notes,\n        modifiers: item.modifiers || [],\n        status: OrderStatus.PENDING,\n      });\n    }\n\n    await prisma.orderItem.createMany({\n      data: newItems,\n    });\n\n    // Update order totals\n    const settings = await prisma.settings.findUnique({ where: { key: 'restaurant' } });\n    const taxRate = (settings?.value as any)?.taxRate || 10;\n    const newSubtotal = Number(order.subtotal) + additionalTotal;\n    const newTax = newSubtotal * (taxRate / 100);\n    const newTotal = newSubtotal + newTax;\n\n    const updatedOrder = await prisma.order.update({\n      where: { id },\n      data: {\n        subtotal: newSubtotal,\n        tax: newTax,\n        total: newTotal,\n      },\n      include: {\n        table: true,\n        user: {\n          select: { id: true, name: true },\n        },\n        items: {\n          include: {\n            menuItem: true,\n          },\n        },\n      },\n    });\n\n    broadcastOrderUpdate(updatedOrder);\n\n    return { order: updatedOrder };\n  });\n\n  // Process payment\n  server.post('/:id/payment', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const { amount, method, tip } = request.body as {\n      amount: number;\n      method: PaymentMethod;\n      tip?: number;\n    };\n\n    const order = await prisma.order.findUnique({\n      where: { id },\n      include: { payments: true },\n    });\n\n    if (!order) {\n      return reply.status(404).send({ error: 'Sipari\u015F bulunamad\u0131' });\n    }\n\n    // Calculate paid amount\n    const paidAmount = order.payments.reduce((sum, p) => sum + Number(p.amount), 0);\n    const totalWithTip = Number(order.total) + (tip || 0);\n    const remaining = totalWithTip - paidAmount;\n\n    if (amount > remaining) {\n      return reply.status(400).send({ error: '\u00D6deme tutar\u0131 kalan tutardan fazla olamaz' });\n    }\n\n    // Create payment\n    await prisma.payment.create({\n      data: {\n        orderId: id,\n        amount,\n        method,\n      },\n    });\n\n    // Update order\n    const newPaidAmount = paidAmount + amount;\n    const isPaid = newPaidAmount >= totalWithTip;\n    const newPaymentStatus = isPaid ? PaymentStatus.PAID : PaymentStatus.PARTIAL;\n\n    const updatedOrder = await prisma.order.update({\n      where: { id },\n      data: {\n        paymentStatus: newPaymentStatus,\n        paymentMethod: method,\n        tip: tip || order.tip,\n        status: isPaid ? OrderStatus.COMPLETED : order.status,\n        completedAt: isPaid ? new Date() : order.completedAt,\n      },\n      include: {\n        table: true,\n        user: {\n          select: { id: true, name: true },\n        },\n        items: {\n          include: {\n            menuItem: true,\n          },\n        },\n        payments: true,\n      },\n    });\n\n    // Free table if paid\n    if (isPaid && order.tableId) {\n      const table = await prisma.table.update({\n        where: { id: order.tableId },\n        data: { status: TableStatus.CLEANING },\n      });\n      broadcastTableUpdate(table);\n    }\n\n    broadcastOrderUpdate(updatedOrder);\n\n    return { order: updatedOrder };\n  });\n\n  // Cancel order\n  server.post('/:id/cancel', { preHandler: verifyAuth }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const { id } = request.params as { id: string };\n    const { reason } = request.body as { reason?: string };\n\n    const order = await prisma.order.findUnique({\n      where: { id },\n      include: { table: true },\n    });\n\n    if (!order) {\n      return reply.status(404).send({ error: 'Sipari\u015F bulunamad\u0131' });\n    }\n\n    if (order.status === OrderStatus.COMPLETED) {\n      return reply.status(400).send({ error: 'Tamamlanm\u0131\u015F sipari\u015F iptal edilemez' });\n    }\n\n    const updatedOrder = await prisma.order.update({\n      where: { id },\n      data: {\n        status: OrderStatus.CANCELLED,\n        notes: reason ? `${order.notes || ''}\\n\u0130ptal nedeni: ${reason}` : order.notes,\n      },\n      include: {\n        table: true,\n        user: {\n          select: { id: true, name: true },\n        },\n        items: {\n          include: {\n            menuItem: true,\n          },\n        },\n      },\n    });\n\n    // Free table\n    if (order.tableId) {\n      const table = await prisma.table.update({\n        where: { id: order.tableId },\n        data: { status: TableStatus.FREE },\n      });\n      broadcastTableUpdate(table);\n    }\n\n    broadcastOrderUpdate(updatedOrder);\n\n    return { order: updatedOrder };\n  });\n}\n\n", "import { FastifyInstance, FastifyRequest } from 'fastify';\nimport { PrismaClient, OrderStatus, PaymentMethod } from '@prisma/client';\nimport { verifyAdmin } from '../middleware/auth';\n\nexport default async function reportRoutes(server: FastifyInstance) {\n  const prisma = (server as any).prisma as PrismaClient;\n\n  // Get daily summary\n  server.get('/daily', { preHandler: verifyAdmin }, async (request: FastifyRequest) => {\n    const { date } = request.query as { date?: string };\n    \n    const targetDate = date ? new Date(date) : new Date();\n    const startOfDay = new Date(targetDate);\n    startOfDay.setHours(0, 0, 0, 0);\n    const endOfDay = new Date(targetDate);\n    endOfDay.setHours(23, 59, 59, 999);\n\n    // Get orders for the day\n    const orders = await prisma.order.findMany({\n      where: {\n        createdAt: {\n          gte: startOfDay,\n          lte: endOfDay,\n        },\n        status: OrderStatus.COMPLETED,\n      },\n      include: {\n        items: {\n          include: {\n            menuItem: true,\n          },\n        },\n        payments: true,\n      },\n    });\n\n    // Calculate stats\n    const totalOrders = orders.length;\n    const totalRevenue = orders.reduce((sum, order) => sum + Number(order.total), 0);\n    \n    const cashAmount = orders\n      .filter((o) => o.paymentMethod === PaymentMethod.CASH)\n      .reduce((sum, o) => sum + Number(o.total), 0);\n    \n    const cardAmount = orders\n      .filter((o) => o.paymentMethod === PaymentMethod.CREDIT_CARD || o.paymentMethod === PaymentMethod.DEBIT_CARD)\n      .reduce((sum, o) => sum + Number(o.total), 0);\n    \n    const otherAmount = totalRevenue - cashAmount - cardAmount;\n\n    // Cancelled orders\n    const cancelledOrders = await prisma.order.count({\n      where: {\n        createdAt: {\n          gte: startOfDay,\n          lte: endOfDay,\n        },\n        status: OrderStatus.CANCELLED,\n      },\n    });\n\n    // Top selling items\n    const itemSales: Record<string, { id: string; name: string; count: number; revenue: number }> = {};\n    \n    for (const order of orders) {\n      for (const item of order.items) {\n        const key = item.menuItemId;\n        if (!itemSales[key]) {\n          itemSales[key] = {\n            id: item.menuItemId,\n            name: item.menuItem.name,\n            count: 0,\n            revenue: 0,\n          };\n        }\n        itemSales[key].count += item.quantity;\n        itemSales[key].revenue += Number(item.total);\n      }\n    }\n\n    const topItems = Object.values(itemSales)\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 10);\n\n    // Average order time (from creation to completion)\n    const orderTimes = orders\n      .filter((o) => o.completedAt)\n      .map((o) => (o.completedAt!.getTime() - o.createdAt.getTime()) / 60000); // in minutes\n    \n    const avgOrderTime = orderTimes.length > 0\n      ? Math.round(orderTimes.reduce((sum, t) => sum + t, 0) / orderTimes.length)\n      : null;\n\n    // Hourly breakdown\n    const hourlyBreakdown: Record<number, { orders: number; revenue: number }> = {};\n    for (let i = 0; i < 24; i++) {\n      hourlyBreakdown[i] = { orders: 0, revenue: 0 };\n    }\n    \n    for (const order of orders) {\n      const hour = order.createdAt.getHours();\n      hourlyBreakdown[hour].orders += 1;\n      hourlyBreakdown[hour].revenue += Number(order.total);\n    }\n\n    return {\n      date: targetDate.toISOString().split('T')[0],\n      summary: {\n        totalOrders,\n        totalRevenue,\n        cashAmount,\n        cardAmount,\n        otherAmount,\n        cancelledOrders,\n        avgOrderTime,\n      },\n      topItems,\n      hourlyBreakdown,\n    };\n  });\n\n  // Get weekly summary\n  server.get('/weekly', { preHandler: verifyAdmin }, async (request: FastifyRequest) => {\n    const { startDate } = request.query as { startDate?: string };\n    \n    const start = startDate ? new Date(startDate) : new Date();\n    start.setDate(start.getDate() - start.getDay()); // Start of week (Sunday)\n    start.setHours(0, 0, 0, 0);\n    \n    const end = new Date(start);\n    end.setDate(end.getDate() + 7);\n    end.setHours(23, 59, 59, 999);\n\n    const orders = await prisma.order.findMany({\n      where: {\n        createdAt: {\n          gte: start,\n          lt: end,\n        },\n        status: OrderStatus.COMPLETED,\n      },\n    });\n\n    // Daily breakdown\n    const dailyBreakdown: Record<string, { orders: number; revenue: number }> = {};\n    const days = ['Pazar', 'Pazartesi', 'Sal\u0131', '\u00C7ar\u015Famba', 'Per\u015Fembe', 'Cuma', 'Cumartesi'];\n    \n    for (let i = 0; i < 7; i++) {\n      const date = new Date(start);\n      date.setDate(date.getDate() + i);\n      dailyBreakdown[days[i]] = { orders: 0, revenue: 0 };\n    }\n\n    for (const order of orders) {\n      const dayName = days[order.createdAt.getDay()];\n      dailyBreakdown[dayName].orders += 1;\n      dailyBreakdown[dayName].revenue += Number(order.total);\n    }\n\n    const totalOrders = orders.length;\n    const totalRevenue = orders.reduce((sum, o) => sum + Number(o.total), 0);\n    const avgDailyOrders = Math.round(totalOrders / 7);\n    const avgDailyRevenue = Math.round(totalRevenue / 7);\n\n    return {\n      weekStart: start.toISOString().split('T')[0],\n      weekEnd: new Date(end.getTime() - 1).toISOString().split('T')[0],\n      summary: {\n        totalOrders,\n        totalRevenue,\n        avgDailyOrders,\n        avgDailyRevenue,\n      },\n      dailyBreakdown,\n    };\n  });\n\n  // Get monthly summary\n  server.get('/monthly', { preHandler: verifyAdmin }, async (request: FastifyRequest) => {\n    const { year, month } = request.query as { year?: string; month?: string };\n    \n    const now = new Date();\n    const targetYear = year ? parseInt(year, 10) : now.getFullYear();\n    const targetMonth = month ? parseInt(month, 10) - 1 : now.getMonth();\n\n    const start = new Date(targetYear, targetMonth, 1);\n    const end = new Date(targetYear, targetMonth + 1, 0, 23, 59, 59, 999);\n\n    const orders = await prisma.order.findMany({\n      where: {\n        createdAt: {\n          gte: start,\n          lte: end,\n        },\n        status: OrderStatus.COMPLETED,\n      },\n      include: {\n        items: {\n          include: {\n            menuItem: {\n              include: {\n                category: true,\n              },\n            },\n          },\n        },\n      },\n    });\n\n    // Category breakdown\n    const categoryBreakdown: Record<string, { name: string; orders: number; revenue: number }> = {};\n    \n    for (const order of orders) {\n      for (const item of order.items) {\n        const catId = item.menuItem.categoryId;\n        if (!categoryBreakdown[catId]) {\n          categoryBreakdown[catId] = {\n            name: item.menuItem.category.name,\n            orders: 0,\n            revenue: 0,\n          };\n        }\n        categoryBreakdown[catId].orders += item.quantity;\n        categoryBreakdown[catId].revenue += Number(item.total);\n      }\n    }\n\n    const totalOrders = orders.length;\n    const totalRevenue = orders.reduce((sum, o) => sum + Number(o.total), 0);\n    const daysInMonth = end.getDate();\n    const avgDailyOrders = Math.round(totalOrders / daysInMonth);\n    const avgDailyRevenue = Math.round(totalRevenue / daysInMonth);\n\n    return {\n      year: targetYear,\n      month: targetMonth + 1,\n      summary: {\n        totalOrders,\n        totalRevenue,\n        avgDailyOrders,\n        avgDailyRevenue,\n        daysInMonth,\n      },\n      categoryBreakdown: Object.values(categoryBreakdown).sort((a, b) => b.revenue - a.revenue),\n    };\n  });\n\n  // Get staff performance\n  server.get('/staff', { preHandler: verifyAdmin }, async (request: FastifyRequest) => {\n    const { startDate, endDate } = request.query as { startDate?: string; endDate?: string };\n    \n    const start = startDate ? new Date(startDate) : new Date(new Date().setDate(new Date().getDate() - 30));\n    start.setHours(0, 0, 0, 0);\n    \n    const end = endDate ? new Date(endDate) : new Date();\n    end.setHours(23, 59, 59, 999);\n\n    const orders = await prisma.order.findMany({\n      where: {\n        createdAt: {\n          gte: start,\n          lte: end,\n        },\n        status: OrderStatus.COMPLETED,\n        userId: { not: null },\n      },\n      include: {\n        user: {\n          select: { id: true, name: true, role: true },\n        },\n      },\n    });\n\n    const staffStats: Record<string, { \n      id: string; \n      name: string; \n      role: string;\n      orderCount: number; \n      totalRevenue: number;\n      avgOrderValue: number;\n    }> = {};\n\n    for (const order of orders) {\n      if (!order.userId) continue;\n      \n      if (!staffStats[order.userId]) {\n        staffStats[order.userId] = {\n          id: order.userId,\n          name: order.user?.name || 'Bilinmiyor',\n          role: order.user?.role || 'WAITER',\n          orderCount: 0,\n          totalRevenue: 0,\n          avgOrderValue: 0,\n        };\n      }\n      \n      staffStats[order.userId].orderCount += 1;\n      staffStats[order.userId].totalRevenue += Number(order.total);\n    }\n\n    // Calculate averages\n    for (const staff of Object.values(staffStats)) {\n      staff.avgOrderValue = staff.orderCount > 0 \n        ? Math.round(staff.totalRevenue / staff.orderCount) \n        : 0;\n    }\n\n    return {\n      period: {\n        start: start.toISOString().split('T')[0],\n        end: end.toISOString().split('T')[0],\n      },\n      staff: Object.values(staffStats).sort((a, b) => b.totalRevenue - a.totalRevenue),\n    };\n  });\n}\n\n", "import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';\nimport { PrismaClient } from '@prisma/client';\nimport { verifyAdmin } from '../middleware/auth';\n\nexport default async function settingsRoutes(server: FastifyInstance) {\n  const prisma = (server as any).prisma as PrismaClient;\n\n  // Get all settings\n  server.get('/', { preHandler: verifyAdmin }, async () => {\n    const settings = await prisma.settings.findMany();\n    \n    const result: Record<string, any> = {};\n    for (const setting of settings) {\n      result[setting.key] = setting.value;\n    }\n    \n    return { settings: result };\n  });\n\n  // Get specific setting\n  server.get('/:key', async (request: FastifyRequest, reply: FastifyReply) => {\n    const { key } = request.params as { key: string };\n    \n    const setting = await prisma.settings.findUnique({\n      where: { key },\n    });\n\n    if (!setting) {\n      return reply.status(404).send({ error: 'Ayar bulunamad\u0131' });\n    }\n\n    return { [key]: setting.value };\n  });\n\n  // Update setting\n  server.put('/:key', { preHandler: verifyAdmin }, async (request: FastifyRequest) => {\n    const { key } = request.params as { key: string };\n    const { value } = request.body as { value: any };\n\n    const setting = await prisma.settings.upsert({\n      where: { key },\n      update: { value },\n      create: { key, value },\n    });\n\n    return { [key]: setting.value };\n  });\n\n  // Get public settings (for frontend)\n  server.get('/public/restaurant', async () => {\n    const restaurantSetting = await prisma.settings.findUnique({\n      where: { key: 'restaurant' },\n    });\n\n    const whatsappSetting = await prisma.settings.findUnique({\n      where: { key: 'whatsapp' },\n    });\n\n    return {\n      restaurant: restaurantSetting?.value || {},\n      whatsapp: whatsappSetting?.value || {},\n    };\n  });\n\n  // Backup all settings\n  server.get('/backup', { preHandler: verifyAdmin }, async () => {\n    const settings = await prisma.settings.findMany();\n    const categories = await prisma.category.findMany({\n      include: { items: { include: { modifiers: true } } },\n    });\n    const tables = await prisma.table.findMany();\n    const users = await prisma.user.findMany({\n      select: {\n        id: true,\n        email: true,\n        name: true,\n        role: true,\n        pin: true,\n        active: true,\n      },\n    });\n\n    return {\n      exportDate: new Date().toISOString(),\n      settings,\n      categories,\n      tables,\n      users,\n    };\n  });\n\n  // Restore from backup\n  server.post('/restore', { preHandler: verifyAdmin }, async (request: FastifyRequest, reply: FastifyReply) => {\n    const backup = request.body as any;\n\n    if (!backup || !backup.settings) {\n      return reply.status(400).send({ error: 'Ge\u00E7ersiz yedek dosyas\u0131' });\n    }\n\n    try {\n      // Restore settings\n      for (const setting of backup.settings) {\n        await prisma.settings.upsert({\n          where: { key: setting.key },\n          update: { value: setting.value },\n          create: { key: setting.key, value: setting.value },\n        });\n      }\n\n      return { success: true, message: 'Ayarlar ba\u015Far\u0131yla geri y\u00FCklendi' };\n    } catch (err) {\n      return reply.status(500).send({ error: 'Geri y\u00FCkleme ba\u015Far\u0131s\u0131z' });\n    }\n  });\n}\n\n"],
  "mappings": "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",
  "names": ["import_websocket", "import_client", "server", "prisma", "bcrypt", "jwt", "import_client", "import_bcryptjs", "import_jsonwebtoken", "JWT_SECRET", "jwt", "server", "prisma", "bcrypt", "server", "server", "prisma", "server", "prisma", "server", "prisma", "import_client", "server", "prisma", "import_client", "server", "prisma", "start", "server", "prisma", "Fastify", "cors", "websocket"]
}
